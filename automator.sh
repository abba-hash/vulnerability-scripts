#!/bin/bash


echo "*******************************************************************"
echo "*                                                                 *"
echo "*                                                                 *"
echo "*      _         _                        _                       *"
echo "*     / \  _   _| |_ ___  _ __ ___   __ _| |_ ___  _ __           *"
echo "*    / _ \| | | | __/ _ \| '_ ` _ \ / _` | __/ _ \| '__|          *"
echo "*   / ___ \ |_| | || (_) | | | | | | (_| | || (_) | |             *"
echo "*  /_/   \_\__,_|\__\___/|_| |_| |_|\__,_|\__\___/|_|             *"
echo "*                                                                 *"                                                     
echo "*            Coded by Abba Umar                                   *"
echo "*                                                                 *"
echo "*******************************************************************"




# $./automator domain program platform


domain=$1
program=$2
platform=$3


echo "*******************************************************************"
echo "*                                                                * "
echo "* Program name   : ${program}"
echo "* "
echo "* Domain name    : ${domain}"
echo "* "
echo "* Platform name  : ${platform} "
echo "*                                                                * "
echo "*******************************************************************"




cd ${platform}

mkdir ${program}

cd ${program}


programfolder=`pwd`

subfinder -d ${domain} -o subfinder_${domain}.txt
echo ${domain} | assetfinder --subs-only > assetfinder_${domain}.txt
cd ~/tools/Sublist3r
python3 sublist3r.py -d ${domain} -o "${programfolder}/sublist3r_${domain}.txt"

cd ${programfolder}

cat subfinder_${domain}.txt assetfinder_${domain}.txt sublist3r_${domain}.txt | sort -u | httpx -o httpx_${domain}.txt

cat httpx_${domain}.txt | waybackurls > waybackurls_${domain}.txt

cat httpx_${domain}.txt | gau > gau_${domain}.txt 

cat httpx_${domain}.txt | hakrawler > hakrawler_${domain}.txt

cat hakrawler_${domain}.txt waybackurls_${domain}.txt gau_${domain}.txt | uro | tee -a uro_${domain}.txt


cat httpx_${domain}.txt | nuclei -t ~/nuclei-templates/ -o nuclei_httpx_${domain}.txt
cat uro_${domain}.txt | nuclei -t ~/nuclei-templates/ -o nuclei_uro_${domain}.txt



cat uro_${domain}.txt | grep "=" | tee -a params_${domain}.txt

cat params_${domain}.txt | kxss > kxss_${domain}.txt
cat params_${domain}.txt | sort -u | dalfox pipe -b ags.xss.ht > dalfox_${domain}.txt


cd ../../

echo "###############################"
echo "#                             #"
echo "#                             #"
echo "#                             #"
echo "#          Finished           #"
echo "#                             #"
echo "#                             #"
echo "#                             #"
echo "###############################"
